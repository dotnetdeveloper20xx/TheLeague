using System.ComponentModel.DataAnnotations;
using TheLeague.Core.Enums;

namespace TheLeague.Api.DTOs;

public record FeeDto(
    Guid Id,
    string Name,
    string? Description,
    string? Code,
    FeeType Type,
    decimal Amount,
    decimal? MinAmount,
    decimal? MaxAmount,
    string Currency,
    bool IsTaxable,
    decimal? TaxRate,
    FeeFrequency Frequency,
    int? FrequencyInterval,
    DateTime? EffectiveFrom,
    DateTime? EffectiveUntil,
    int? DueDayOfMonth,
    bool HasLateFee,
    decimal? LateFeeAmount,
    decimal? LateFeePercentage,
    int? GracePeriodDays,
    bool AppliesToAll,
    string? ApplicableMembershipTypes,
    int? MinAge,
    int? MaxAge,
    bool AllowEarlyPaymentDiscount,
    decimal? EarlyPaymentDiscountPercent,
    int? EarlyPaymentDays,
    bool AllowPartialPayment,
    bool AllowPaymentPlan,
    int? MaxInstallments,
    bool IsRefundable,
    int? RefundableDays,
    bool AutoGenerate,
    bool AutoRemind,
    bool IsActive,
    bool IsRequired,
    bool IsHidden,
    int SortOrder,
    string? GLAccountCode,
    string? CostCenter,
    DateTime CreatedAt,
    int PaymentCount
);

public record FeeListDto(
    Guid Id,
    string Name,
    string? Code,
    FeeType Type,
    decimal Amount,
    string Currency,
    FeeFrequency Frequency,
    bool IsActive,
    bool IsRequired,
    int SortOrder,
    int PaymentCount
);

public record FeeCreateRequest(
    [Required] string Name,
    [Required] FeeType Type,
    [Required] decimal Amount,
    string? Description = null,
    string? Code = null,
    decimal? MinAmount = null,
    decimal? MaxAmount = null,
    string Currency = "GBP",
    bool IsTaxable = false,
    decimal? TaxRate = null,
    FeeFrequency Frequency = FeeFrequency.OneTime,
    int? FrequencyInterval = null,
    DateTime? EffectiveFrom = null,
    DateTime? EffectiveUntil = null,
    int? DueDayOfMonth = null,
    bool HasLateFee = false,
    decimal? LateFeeAmount = null,
    decimal? LateFeePercentage = null,
    int? GracePeriodDays = null,
    int? LateFeeStartDay = null,
    bool AppliesToAll = true,
    string? ApplicableMembershipTypes = null,
    string? ApplicableMemberCategories = null,
    int? MinAge = null,
    int? MaxAge = null,
    bool AllowEarlyPaymentDiscount = false,
    decimal? EarlyPaymentDiscountPercent = null,
    int? EarlyPaymentDays = null,
    bool AllowPartialPayment = false,
    bool AllowPaymentPlan = false,
    int? MaxInstallments = null,
    bool IsRefundable = true,
    int? RefundableDays = null,
    bool AutoGenerate = false,
    int? AutoGenerateDaysBefore = null,
    bool AutoRemind = false,
    string? ReminderSchedule = null,
    bool IsActive = true,
    bool IsRequired = false,
    bool IsHidden = false,
    int SortOrder = 0,
    string? GLAccountCode = null,
    string? CostCenter = null,
    string? TaxCode = null
);

public record FeeUpdateRequest(
    string? Name,
    string? Description,
    string? Code,
    FeeType? Type,
    decimal? Amount,
    decimal? MinAmount,
    decimal? MaxAmount,
    string? Currency,
    bool? IsTaxable,
    decimal? TaxRate,
    FeeFrequency? Frequency,
    int? FrequencyInterval,
    DateTime? EffectiveFrom,
    DateTime? EffectiveUntil,
    int? DueDayOfMonth,
    bool? HasLateFee,
    decimal? LateFeeAmount,
    decimal? LateFeePercentage,
    int? GracePeriodDays,
    int? LateFeeStartDay,
    bool? AppliesToAll,
    string? ApplicableMembershipTypes,
    string? ApplicableMemberCategories,
    int? MinAge,
    int? MaxAge,
    bool? AllowEarlyPaymentDiscount,
    decimal? EarlyPaymentDiscountPercent,
    int? EarlyPaymentDays,
    bool? AllowPartialPayment,
    bool? AllowPaymentPlan,
    int? MaxInstallments,
    bool? IsRefundable,
    int? RefundableDays,
    bool? AutoGenerate,
    int? AutoGenerateDaysBefore,
    bool? AutoRemind,
    string? ReminderSchedule,
    bool? IsActive,
    bool? IsRequired,
    bool? IsHidden,
    int? SortOrder,
    string? GLAccountCode,
    string? CostCenter,
    string? TaxCode
);

public record FeeFilterRequest(
    FeeType? Type = null,
    FeeFrequency? Frequency = null,
    bool? IsActive = null,
    bool? IsRequired = null,
    string? Search = null,
    int Page = 1,
    int PageSize = 20
);
